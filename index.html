<!doctype html>
<html lang="hi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Minecraft Server Launcher — Updates & Download</title>
  <style>
    :root{
      --bg:#0f1720; --card:#0b1220; --muted:#9aa6b2; --accent:#3b82f6; --accent-2:#06b6d4;
      --surface:#0b1220; --success:#10b981;
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    html,body{height:100%;margin:0;background:linear-gradient(180deg,#071017 0%, #071723 100%);color:#e6eef6;}
    .wrap{max-width:1100px;margin:28px auto;padding:20px;}
    header{display:flex;gap:14px;align-items:center;}
    .logo{width:84px;height:84px;border-radius:14px;overflow:hidden;flex:0 0 84px;box-shadow:0 6px 20px rgba(0,0,0,0.6);background:#08121a}
    .logo img{width:100%;height:100%;object-fit:cover;display:block}
    h1{margin:0;font-size:20px}
    p.lead{margin:6px 0 0;color:var(--muted);font-size:13px}

    .grid{display:grid;grid-template-columns:1fr 380px;gap:18px;margin-top:18px}
    .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); padding:16px;border-radius:10px;box-shadow: 0 6px 20px rgba(2,6,23,0.6);border:1px solid rgba(255,255,255,0.03)}
    .actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
    .btn{background:var(--accent);color:white;padding:10px 14px;border-radius:8px;text-decoration:none;display:inline-flex;align-items:center;gap:8px;border:none;cursor:pointer;}
    .btn.secondary{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted)}
    .small{font-size:13px;padding:8px 10px;border-radius:8px}

    .muted{color:var(--muted);font-size:13px}
    .console{background:#031422;border-radius:8px;padding:12px;height:300px;overflow:auto;font-family:ui-monospace,monospace;font-size:12px;color:#cfe8ff;border:1px solid rgba(255,255,255,0.03)}
    .meta{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
    .chip{background:rgba(255,255,255,0.03);padding:6px 8px;border-radius:8px;font-size:12px;color:var(--muted)}

    .right-col .card + .card{margin-top:12px}
    footer{margin-top:18px;color:var(--muted);font-size:13px;text-align:center}

    @media (max-width:900px){
      .grid{grid-template-columns:1fr; }
      .logo{width:64px;height:64px}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="logo">
        <!-- Developer: replace this path with served URL if needed -->
        <img src="/mnt/data/A_2D_digital_vector_illustration_icon_features_a_s.png" alt="Launcher Logo" id="logoImg">
      </div>
      <div>
        <h1>Minecraft Server Launcher</h1>
        <p class="lead">Profiles, auto-start, console viewer — download & updates page. (Syncthing shared folders recommended for multi-PC hosting)</p>
        <div class="meta">
          <div class="chip">Version: <strong id="currentVersion">v1.0.0</strong></div>
          <div class="chip">Platform: Windows</div>
          <div class="chip">Built: <span id="buildDate">—</span></div>
        </div>
      </div>
    </header>

    <div class="grid">
      <!-- left: main -->
      <div>
        <div class="card">
          <h3>Download</h3>
          <p class="muted">Click below to download the launcher. Make sure your browser or antivirus allows running the file. For best results, install Java (OpenJDK) and set up Syncthing for shared folders.</p>
          <div class="actions">
            <!-- change href to your hosted exe path -->
            <a id="downloadBtn" class="btn" href="dist/launcher.exe" download>
              ⬇️ Download Launcher
            </a>
            <button class="btn secondary small" id="checkUpdateBtn">Check for Updates</button>
            <a class="btn secondary small" href="#" id="docsBtn">How to use (Docs)</a>
          </div>

          <hr style="margin:12px 0;border:0;border-top:1px solid rgba(255,255,255,0.03)">

          <h4>Latest release notes</h4>
          <div id="changelog" class="muted" style="max-height:220px;overflow:auto;padding-top:6px">
            <em>Press "Check for Updates" to load remote changelog.</em>
          </div>
        </div>

        <div class="card" style="margin-top:14px">
          <h3>Quick Start</h3>
          <ol class="muted">
            <li>Download launcher and extract if needed.</li>
            <li>Place it in a folder (recommended: <code>Desktop\MinecraftServer</code>).</li>
            <li>Run launcher, create a profile and point folder to your Syncthing-shared folder.</li>
            <li>Use <strong>Create Startup</strong> in launcher to auto-start on login or use Scheduled Task.</li>
          </ol>

          <h4 style="margin-top:10px">Syncthing tip</h4>
          <p class="muted">Use Syncthing to sync the server folder between friends. Share the folder, accept on both sides, and select the local synced path in the launcher profile.</p>
        </div>

        <div class="card" style="margin-top:14px">
          <h3>Live Console (Demo)</h3>
          <div id="console" class="console" aria-live="polite">
            <div class="muted">Console output will appear here when server runs.</div>
          </div>
          <div style="margin-top:8px" class="muted">Note: This demo console shows updates from the local launcher only when connected via WebSocket or polling endpoint. Integrate with the launcher via a small local HTTP API for full live logs.</div>
        </div>
      </div>

      <!-- right: sidebar -->
      <aside class="right-col">
        <div class="card">
          <h3>Profile & Security</h3>
          <p class="muted">Profiles are stored locally. You can password-protect a profile in the launcher to prevent accidental start/stop.</p>
          <div class="actions" style="margin-top:8px">
            <button class="btn small" id="openProfiles">Open Profiles Folder</button>
            <button class="btn small secondary" id="openAppData">Open AppData</button>
          </div>
        </div>

        <div class="card">
          <h3>Website & Updates</h3>
          <p class="muted">This page can fetch update info from your server. Put a JSON at <code>/updates.json</code> and the button will show latest release notes.</p>
          <div style="margin-top:8px" class="muted"><strong>Example updates.json format:</strong>
          <pre style="background:rgba(255,255,255,0.02);padding:8px;border-radius:6px;color:#cfe8ff;font-size:12px">
{
  "version":"1.0.1",
  "notes":"Fixed auto-start and UI polish",
  "url":"https://example.com/downloads/launcher.exe",
  "published":"2025-11-25"
}
          </pre>
          </div>
        </div>

        <div class="card">
          <h3>Support</h3>
          <p class="muted">Need help? Contact via email or host a small FAQ page.</p>
          <div class="actions">
            <a class="btn small" href="mailto:you@example.com">✉️ Email</a>
            <a class="btn small secondary" href="#" id="faqBtn">FAQ</a>
          </div>
        </div>
      </aside>
    </div>

    <footer>
      © <span id="year"></span> Minecraft Server Launcher — Built with ❤️. Host files securely. Update your UPDATE_URL in launcher code for remote updates.
    </footer>
  </div>

  <script>
    // Configuration (change to your hosted values)
    const UPDATE_URL = "/updates.json"; // replace with your real update JSON URL
    const LAUNCHER_DOWNLOAD_PATH = "dist/launcher.exe"; // adjust if placed elsewhere

    document.getElementById('year').textContent = new Date().getFullYear();
    document.getElementById('buildDate').textContent = (new Date()).toLocaleDateString();

    document.getElementById('docsBtn').addEventListener('click', function(e){
      e.preventDefault();
      alert('Docs: Run the launcher → Create profile → Choose Syncthing folder → Start. For 24/7 create Scheduled Task or Windows Service (NSSM).');
    });

    document.getElementById('openProfiles').addEventListener('click', function(){
      // this will try to open a local path using window.location (works if served)
      window.open('/appdata/', '_blank');
    });
    document.getElementById('openAppData').addEventListener('click', function(){
      window.open('/appdata/', '_blank');
    });

    // Update check
    document.getElementById('checkUpdateBtn').addEventListener('click', function(){
      const btn = this;
      btn.disabled = true;
      btn.textContent = 'Checking...';
      fetch(UPDATE_URL, {cache: "no-store"}).then(r => {
        if(!r.ok) throw new Error('No update JSON found ('+r.status+')');
        return r.json();
      }).then(data => {
        let html = `<strong>Latest:</strong> ${data.version} <br/><em>Published:</em> ${data.published || '-'}<br/><p>${data.notes || ''}</p>`;
        if(data.url){
          html += `<p><a class="btn" href="${data.url}" target="_blank">Download ${data.version}</a></p>`;
        }
        document.getElementById('changelog').innerHTML = html;
      }).catch(err => {
        document.getElementById('changelog').innerHTML = '<span style="color:#ffb4b4">Update check failed: '+err.message+'</span>';
      }).finally(() => {
        btn.disabled = false;
        btn.textContent = 'Check for Updates';
      });
    });

    // Small demo "console" logger (client-side demo)
    (function demoConsole(){
      const c = document.getElementById('console');
      const lines = [
        "[INFO] Launcher ready.",
        "[INFO] Profiles loaded from local storage.",
        "[WARN] No remote update server configured.",
        "[INFO] Use 'Download Launcher' to get the exe."
      ];
      let i=0;
      setInterval(() => {
        if(i < lines.length){
          c.innerHTML += '<div style="opacity:0.95;color:#aee1ff;font-family:monospace;padding:2px 0">'+lines[i]+'</div>';
          c.scrollTop = c.scrollHeight;
          i++;
        }
      }, 700);
    })();

    // set logo fallback if not found
    (function setLogoFallback(){
      const img = document.getElementById('logoImg');
      img.onerror = function(){ img.src = 'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="256" height="256"><rect width="100%" height="100%" fill="%23071b2a"/><text x="50%" y="50%" fill="%23ffffff" font-size="22" font-family="Arial" text-anchor="middle" dominant-baseline="middle">Launcher</text></svg>' }
    })();
  </script>
</body>
</html>
